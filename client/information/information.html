<template name="information">
  <div class="search-and-information">
    <div class="search-field">
      <div class="row">
        <div class="col-md-12">
          <form id="consigSearch">
            <input type="text" class="form-control" id="consigKey" value="{{package._id}}" placeholder="Your tracking ID">
          </form>
        </div>
      </div>
    </div>

    {{#with package}}
      {{> informationField}}

      {{#if currentUser}}
        {{> chat}}
      {{/if}}
      {{> addToAccount}}
    {{/with}}

  </div>
</template>

<template name="informationField">
  <div class="information-field">
    <div class="row">
      <div class="col-md-12">
        <div class="content">
          <span class="information-field-headline">From</span> <br>
          <span class="information-field-info">{{originDepotName}}, {{originCountry}}</span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="content">
          <span class="information-field-headline">To</span> <br>
          <span class="information-field-info">{{deliveryTown}}, {{destinationCountry}}</span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="content">
          <span class="information-field-headline">Arrival Due Date</span><br>
          <span class="information-field-info">{{exactMoment deliveryDueDate}}</span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="content">
          <span class="information-field-headline">Current Location</span><br>
          <span class="information-field-info">{{lastStation}}</span>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="chat">
  <div class="chat-field">

    <div class="row">
      <div class="col-md-12">
        <form id="chatMessage">
          <input type="text" class="form-control" id="message" placeholder="Leave a comment">
        </form>
      </div>
    </div>

    <div class="chat-field-messages">
      {{#each package.getMessages}}
      <div class="row">
        <div class="col-md-12">
          <div class="content">
            <span class="date">{{userEmail}}</span><br>
            <span class="date pull-right">{{roughMoment created}}</span><br>
            <span class="message">{{msg}}</span>
          </div>
        </div>
      </div>
      {{else}}
      <div class="row">
        <div class="col-md-12">
          <div class="content">
            <span class="message">No messages yet</span>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
  </div>
</template>

<template name="addToAccount">
  <div class="add-to-account">
    <div class="row">
      <div class="col-md-12">
        <div class="content">
          {{#if canAddPackage}}
            <button class="btn btn-success btn-block" id="addToAccount">Add to my account</button>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</template>
